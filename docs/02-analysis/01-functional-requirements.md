# Функциональные требования проекта SnapMatch

## Модуль загрузки и валидации резюме

### FR-001: Загрузка файла резюме

- Система должна позволять пользователю загрузить файл резюме через веб-интерфейс посредством протокола WebSocket.
- Поддерживаемые форматы: PDF

**Источник**: BR-001

**Критерии приемки**: при нажатии кнопки "Загрузить резюме" открывается диалог выбора файла, после выбора файла 
соискатель получает уведомлание об успешной загрузки резюме.

**Приоритет**: Must


### FR-002: Валидация формата и целостности

- При загрузке система должна проверять:
  - MIME-тип и расширение файла.
  - Возможность извлечения текста (читаемость). 
  - Целостность структуры файла (не битый, не пустой).
- В случае некорректного файла система должна:
  - Отклонить загрузку.
  - Отобразить сообщение об ошибке с причиной.

**Источник**: BR-001

**Критерии приемки**: после нажатия кнопки "Загрузить резюме" при неуспешной валидации соискатель получает уведомление,
что файл имеет отличный от PDF формат, а не уведомление об успешной загрузке резюме.

**Приоритет**: Must


## Модуль хранения резюме

### FR-003: Сохранение оригинального файла

- Загруженные резюме должны сохраняться в файловом хранилище (локально или облачно).
- К каждому файлу должны сохраняться метаданные: ID кандидата, дата загрузки, имя файла.

**Источник**: BR-002

**Критерии приемки**: после нажатия кнопки "Загрузить резюме" и успешной валидации файл сохраняется в файловом хранилище,
а ссылка на него сохраняется в базе данных.

**Приоритет**: Must


## Модуль скоринга резюме

### FR-004: Анализ соответствия вакансии

- Система должна анализировать содержание резюме и сравнивать его с требованиями вакансии **при помощи LLM**.
- На выходе должна формироваться метрика соответствия от 0 до 100.

**Источник**: BR-002

**Критерии приемки**: после сохранения резюме в файловом хранилище файл отправляется через API к большой языковой модели (LLM),
метрика соответствия извлекатеся из ответа LLM и сохраняется в базе данных.

**Приоритет**: Must


### FR-005: Решение по метрике

- Если метрика ≥ порогового значения вакансии:
  - Резюме переходит на следующий этап.
- Если метрика < порога:
  - Кандидат получает уведомление об отказе.

**Источник**: BR-003

**Критерии приемки**: после получения ответа от LLM в БД обновляется статус резюме. Если резюме проходит на следующий этап,
то статус обновляется на "В ожидании обработки рекрутером". Если не проходит, то статус обновляется на "Отклонено на этапе автоматической обработки"

**Приоритет**: Must


## Модуль сводки по резюме

### FR-006: Генерация сводки

- Вместе с анализом резюме система должна формировать сводку **при помощи LLM**, включающую:
  - Сильные стороны кандидата.
  - Слабые стороны. 
  - Рекомендации для общения.

**Источник**: BR-004

**Критерии приемки**: после получения ответа от LLM включает сводку как минимум из трех пунктов и сохраняется в БД. 

**Приоритет**: Must


## Модуль обратной связи соискателю

### FR-007: Уведомление о статусе заявки

- После загрузки резюме кандидат должен получить уведомление о статусе:
  - Принято. 
  - Отклонено.

**Источник**: BR-005

**Критерии приемки**: После обновления статуса обработки резюме в БД после его анализа в LLM, пользователь получает уведомление

**Приоритет**: Must


### FR-008: Причина отказа

- В случае отказа в уведомлении показывается причина (например, недостаточный опыт, несоответствие требованиям).

**Источник**: BR-005

**Критерии приемки**: После обновления статуса обработки резюме в БД после его анализа в LLM, пользователь получает
уведомление в котором помимо статуса обработки резюме также указана причина отказа.

**Приоритет**: Must


## Модуль истории откликов

### FR-009: Просмотр истории откликов

- HR-специалист должен иметь доступ к списку всех откликов кандидатов на вакансии.
- Для каждого отклика отображаются:
  - Дата отклика.
  - Имя кандидата.
  - Файл резюме (ссылка на файл в хранилище).
  - Название вакансии и ссылка на нее.
  - Статус (В ожидании автоматической обработки, В ожидании обработки рекрутером, Отклонено на этапе автоматической обработки). 
  - Метрика соответствия.
  - Сводка по кандидату.

**Источник**: BR-006

**Критерии приемки**: После обновления статуса обработки резюме в БД после его анализа в LLM, пользователь получает уведомление

**Приоритет**: Must